"use strict";define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","local_edwiserreports/variables","local_edwiserreports/jquery.dataTables","local_edwiserreports/dataTables.bootstrap4","local_edwiserreports/common"],function(a,e,t,o,n,d){return{init:function(n){var r="#wdm-courseengage-individual",l=r+" .table",i=r+" .loader",s=a(r).data("sesskey"),c=d.requestUrl+"?action=get_courseengage_data_ajax&sesskey="+s,u=l+" a.modal-trigger",g=null,m=0;function h(e){a(l).show(),a(i).hide(),g=a(l).DataTable({ajax:c+"&cohortid="+e,columns:[{data:"coursename"},{data:"enrolment"},{data:"visited"},{data:"activitystart"},{data:"completedhalf"},{data:"coursecompleted"}],columnDefs:[{className:"text-left",targets:0},{className:"text-center modal-trigger",targets:"_all"}],language:{searchPlaceholder:"Search Course",emptyTable:"There are no courses"},drawCallback:function(){a(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),a(".dataTables_filter").addClass("pagination-sm pull-right")},bInfo:!1})}a(document).ready(function(){h(m),a(document).on("click","#cohortfilter ~ .dropdown-menu .dropdown-item",function(){g&&(g.destroy(),a(l).hide(),a(i).show()),m=a(this).data("cohortid"),a("#engagement").find('.download-links input[name="cohortid"]').val(m),d.changeExportUrl(m,".dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",d.cohortReplaceFlag),a("#cohortfilter").html(a(this).text()),h(m)}),a(document).on("click",u,function(){var d=a(this).data("action"),r=a(this).data("courseid"),l=a(this).data("coursename"),i=null;e.create({body:o.loadFragment("local_edwiserreports","userslist",n,{page:"courseengage",courseid:r,action:d,cohortid:m})}).then(function(e){(i=e.getRoot()).find(".modal-dialog").addClass("modal-lg"),e.setTitle(l),e.show(),i.on(t.hidden,function(){e.destroy()}),i.on(t.shown,function(){a(window).resize()}),i.on(t.bodyRendered,function(){var a=i.find(".modal-table");a.find("tbody").hasClass("empty")&&a.find("tbody").empty(),i.find(".modal-table").DataTable({language:{searchPlaceholder:"Search User",emptyTable:"There are no users"},drawCallback:function(){i.find(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),i.find(".dataTables_filter").addClass("pagination-sm pull-right")},lengthChange:!1,bInfo:!1})})})})})}}});
//# sourceMappingURL=courseengage.min.js.map
