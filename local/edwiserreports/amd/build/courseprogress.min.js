"use strict";define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","local_edwiserreports/variables","local_edwiserreports/jquery.dataTables","local_edwiserreports/dataTables.bootstrap4","local_edwiserreports/common"],function(a,e,t,o,r,l){return{init:function(r){var d="#wdm-courseprogress-individual",s=d+" .table",n=d+" .loader",i=s+" a.modal-trigger",c=null,m=0,u=a(d).data("sesskey"),p=l.requestUrl+"?action=get_courseprogress_graph_data_ajax&sesskey="+u;function g(e){a(s).show(),a(n).hide();var t=JSON.stringify({courseid:"all",cohortid:e});c=a(s).DataTable({ajax:p+"&cohortid="+e+"&data="+t,columns:[{data:"coursename"},{data:"enrolments"},{data:"completed100"},{data:"completed80"},{data:"completed60"},{data:"completed40"},{data:"completed20"},{data:"completed00"}],columnDefs:[{className:"text-left",targets:0},{className:"text-center modal-trigger",targets:"_all"}],language:{searchPlaceholder:"Search Course",emptyTable:"There are no courses"},drawCallback:function(){a(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),a(".dataTables_filter").addClass("pagination-sm pull-right")},bInfo:!1})}a(document).ready(function(){g(m),a(document).on("click","#cohortfilter ~ .dropdown-menu .dropdown-item",function(){c&&(c.destroy(),a(s).hide(),a(n).show()),m=a(this).data("cohortid"),a("#progress").find('.download-links input[name="cohortid"]').val(m),a("#cohortfilter").html(a(this).text()),g(m)}),a(document).on("click",i,function(){var l=a(this).data("minvalue"),d=a(this).data("maxvalue"),s=a(this).data("courseid"),n=a(this).data("coursename"),i=null;e.create({body:o.loadFragment("local_edwiserreports","userslist",r,{page:"courseprogress",courseid:s,minval:l,maxval:d,cohortid:m})}).then(function(e){(i=e.getRoot()).find(".modal-dialog").addClass("modal-lg"),e.setTitle(n),e.show(),i.on(t.hidden,function(){e.destroy()}),i.on(t.bodyRendered,function(){var e=i.find(".modal-table");e.find("tbody").hasClass("empty")&&e.find("tbody").empty(),i.find(".modal-table").DataTable({language:{searchPlaceholder:"Search User",emptyTable:"There are no users"},drawCallback:function(){a(".dataTables_paginate > .pagination").addClass("pagination-sm pull-right"),a(".dataTables_filter").addClass("pagination-sm pull-right")},lengthChange:!1,bInfo:!1})})})})})}}});
//# sourceMappingURL=courseprogress.min.js.map
