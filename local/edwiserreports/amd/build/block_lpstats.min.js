"use strict";define(["jquery","core/chartjs","local_edwiserreports/defaultconfig","local_edwiserreports/variables","local_edwiserreports/select2"],function(a,e,t,s){return{init:function(l){var o=null,n=t.getPanel("#lpstatsblock"),r=t.getPanel("#lpstatsblock","body"),d=r+" #wdm-lpstats-select",c=n+" .dropdown-menu[aria-labelledby='export-dropdown'] .dropdown-item",p=r+" .ct-chart",i=r+" .loader",u=!1;function g(s){a.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,sesskey:a(n).data("sesskey"),data:{action:"get_lpstats_data_ajax",sesskey:a(n).data("sesskey"),data:JSON.stringify({lpid:s})}}).done(function(a){!function(a){if(u){u.graph.labels=a.labels,u.graph.data=a.data;var t={labels:u.graph.labels,datasets:[{data:u.graph.data,backgroundColor:u.graph.backgroundColor}]};o=new e(u.ctx,{data:t,type:u.graph.type,options:u.graph.options})}}(a.data)}).fail(function(a){console.log(a)}).always(function(){a(i).addClass("d-none"),a(p).removeClass("d-none"),l("lpStatsBlock")})}a(document).ready(function(){var e=a(d).val();(u=t.getLpStatsBlock())?(g(e),a(r+" .singleselect").select2(),a(d).on("change",function(){e=a(this).val(),a(p).addClass("d-none"),a(i).removeClass("d-none"),t.changeExportUrl(e,c,s.filterReplaceFlag),o.destroy(),g(e)})):l("lpStatsBlock")})}}});
//# sourceMappingURL=block_lpstats.min.js.map
