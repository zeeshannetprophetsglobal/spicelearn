{"version":3,"sources":["block_certificatestats.js"],"names":["define","$","templates","cfg","common","panel","getPanel","panelBody","table","dropdownBody","init","hideLoader","loader","hide","show","ajax","url","requestUrl","type","requestType","dataType","requestDataType","data","action","sesskey","done","response","render","then","html","js","empty","appendNodeContents","DataTable","oLanguage","sEmptyTable","sSearchPlaceholder","initComplete","drawCallback","addClass","lengthChange","bInfo","fail","ex","console","log","error"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,iBAAkB,qCAAsC,YAAa,SAAUC,EAAGC,EAAWC,EAAKC,GAClH,IAAIC,EAAQF,EAAIG,SAAS,sBACrBC,EAAYJ,EAAIG,SAAS,qBAAsB,QAC/CE,EAAQH,EAAQ,UAChBI,EAAeJ,EAAQ,mBAkE3B,MAAO,CACLK,KA9DF,WAIE,SAASC,IACPP,EAAOQ,OAAOC,KAAK,sBAIrBT,EAAOQ,OAAOE,KAAK,sBACnBb,EAAEc,KAAK,CACLC,IAAKb,EAAIc,WACTC,KAAMf,EAAIgB,YACVC,SAAUjB,EAAIkB,gBACdC,KAAM,CACJC,OAAQ,6BACRC,QAASvB,EAAEI,GAAOiB,KAAK,cAExBG,KAAK,SAAUC,GAChBxB,EAAUyB,OAAO,yCAA0CD,EAASJ,MAAMM,KAAK,SAAUC,EAAMC,GAC7F7B,EAAEM,GAAWwB,QACb7B,EAAU8B,mBAAmBzB,EAAWsB,EAAMC,GACtBJ,EAASJ,KAqBrCrB,EAAEO,GAAOyB,UAAU,CACjBC,UAAW,CACTC,YAAa,kCACbC,mBAAoB,uBAEtBC,aAAc,WACZpC,EAAEQ,GAAcK,QAElBwB,aAAc,WACZrC,EAAE,sCAAsCsC,SAAS,4BACjDtC,EAAE,sBAAsBsC,SAAS,6BAEnCC,cAAc,EACdC,OAAO,IAhCL9B,MAEC+B,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,GAEZhC,QAED+B,KAAK,SAAUI,GAChBF,QAAQC,IAAIC,GAEZnC","sourcesContent":["/* eslint-disable no-console */\ndefine([\n    \"jquery\",\n    \"core/templates\",\n    \"local_edwiserreports/defaultconfig\",\n    './common',\n], function($, templates, cfg, common) {\n    var panel = cfg.getPanel(\"#certificatesblock\");\n    var panelBody = cfg.getPanel(\"#certificatesblock\", \"body\");\n    var table = panel + \" .table\";\n    var dropdownBody = panel + \" .table-dropdown\";\n\n    /**\n     * Initialize\n     */\n    function init() {\n        /**\n         * Hide loader/\n         */\n        function hideLoader() {\n            common.loader.hide('#certificatesblock');\n        }\n        // Show loader.\n        common.loader.show('#certificatesblock');\n\n        $.ajax({\n            url: cfg.requestUrl,\n            type: cfg.requestType,\n            dataType: cfg.requestDataType,\n            data: {\n                action: 'get_certificates_data_ajax',\n                sesskey: $(panel).data(\"sesskey\")\n            },\n        })\n            .done(function(response) {\n                templates.render('local_edwiserreports/certificatestable', response.data)\n                    .then(function(html, js) {\n                        $(panelBody).empty();\n                        templates.appendNodeContents(panelBody, html, js);\n                        createCertificatesTable(response.data);\n\n                        // Hide loader.\n                        hideLoader();\n                        return;\n                    }).fail(function(ex) {\n                        console.log(ex);\n\n                        // Hide loader.\n                        hideLoader();\n                    });\n            })\n            .fail(function(error) {\n                console.log(error);\n\n                // Hide loader.\n                hideLoader();\n            });\n    }\n\n    /**\n     * Create certificate table.\n     */\n    function createCertificatesTable() {\n        $(table).DataTable({\n            oLanguage: {\n                sEmptyTable: \"There is no certificate created\",\n                sSearchPlaceholder: \"Search Certificates\"\n            },\n            initComplete: function() {\n                $(dropdownBody).show();\n            },\n            drawCallback: function() {\n                $('.dataTables_paginate > .pagination').addClass('pagination-sm pull-right');\n                $('.dataTables_filter').addClass('pagination-sm pull-right');\n            },\n            lengthChange: false,\n            bInfo: false\n        });\n    }\n\n    // Must return the init function\n    return {\n        init: init\n    };\n});\n"],"file":"block_certificatestats.min.js"}