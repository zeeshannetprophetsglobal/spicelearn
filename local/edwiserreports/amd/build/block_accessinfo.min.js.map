{"version":3,"sources":["block_accessinfo.js"],"names":["define","$","templates","cfg","common","panel","getPanel","panelBody","table","loader","accessDesc","init","notifyListner","document","ready","show","ajax","url","requestUrl","type","requestType","dataType","requestDataType","data","action","sesskey","done","response","render","getTemplate","then","html","js","replaceNodeContents","fail","ex","console","log","always","remove","removeClass","tooltip","hide","error"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,iBAAkB,qCAAsC,YAAa,SAAUC,EAAGC,EAAWC,EAAKC,GAClH,IAAIC,EAAQF,EAAIG,SAAS,oBACrBC,EAAYJ,EAAIG,SAAS,mBAAoB,QAC7CE,EAAQL,EAAIG,SAAS,mBAAoB,SACzCG,EAASN,EAAIG,SAAS,mBAAoB,UAC1CI,EAAa,uBAmDjB,MAAO,CACLC,KA9CF,SAAcC,GACZX,EAAEY,UAAUC,MAAM,WAShBV,EAAOK,OAAOM,KAAK,oBACnBd,EAAEe,KAAK,CACLC,IAAKd,EAAIe,WACTC,KAAMhB,EAAIiB,YACVC,SAAUlB,EAAImB,gBACdC,KAAM,CACJC,OAAQ,2BACRC,QAASxB,EAAEI,GAAOkB,KAAK,cAExBG,KAAK,SAAUC,GAEhBzB,EAAU0B,OAAOzB,EAAI0B,YAAY,mBAAoBF,EAASJ,MAAMO,KAAK,SAAUC,EAAMC,GACvF9B,EAAU+B,oBAAoB1B,EAAWwB,EAAMC,KAE9CE,KAAK,SAAUC,GAChBC,QAAQC,IAAIF,KACXG,OAAO,WACRrC,EAAES,GAAYK,OACdd,EAAEQ,GAAQ8B,SACVtC,EAAEO,GAAOgC,YAAY,UACrBvC,EAAEI,EAAQ,4BAA4BoC,UAEtCrC,EAAOK,OAAOiC,KAAK,wBAEpBR,KAAK,SAAUS,GAChBP,QAAQC,IAAIM,KACXL,OAAO,WACR1B,EAAc,cAEdR,EAAOK,OAAOiC,KAAK","sourcesContent":["/* eslint-disable no-console */\ndefine([\n    'jquery',\n    'core/templates',\n    'local_edwiserreports/defaultconfig',\n    './common'\n], function($, templates, cfg, common) {\n    var panel = cfg.getPanel(\"#siteaccessblock\");\n    var panelBody = cfg.getPanel(\"#siteaccessblock\", \"body\");\n    var table = cfg.getPanel(\"#siteaccessblock\", \"table\");\n    var loader = cfg.getPanel(\"#siteaccessblock\", \"loader\");\n    var accessDesc = \"#accessinfodesctable\";\n\n    /**\n     * Initialize\n     * @param {function} notifyListner Callback function\n     */\n    function init(notifyListner) {\n        $(document).ready(function() {\n            generateAccessInfoGraph();\n        });\n\n        /**\n         * Generate access info graph\n         */\n        function generateAccessInfoGraph() {\n\n            // Show loader.\n            common.loader.show('#siteaccessblock');\n            $.ajax({\n                url: cfg.requestUrl,\n                type: cfg.requestType,\n                dataType: cfg.requestDataType,\n                data: {\n                    action: 'get_siteaccess_data_ajax',\n                    sesskey: $(panel).data(\"sesskey\")\n                },\n            })\n            .done(function(response) {\n                // eslint-disable-next-line promise/catch-or-return\n                templates.render(cfg.getTemplate(\"siteaccessblock\"), response.data)\n                .then(function(html, js) {\n                    templates.replaceNodeContents(panelBody, html, js);\n                    return;\n                })\n                .fail(function(ex) {\n                    console.log(ex);\n                })\n                .always(function() {\n                    $(accessDesc).show();\n                    $(loader).remove();\n                    $(table).removeClass(\"d-none\");\n                    $(panel + ' [data-toggle=\"tooltip\"]').tooltip();\n\n                    // Hide loader.\n                    common.loader.hide('#siteaccessblock');\n                });\n            })\n            .fail(function(error) {\n                console.log(error);\n            }).always(function() {\n                notifyListner(\"accessInfo\");\n\n                // Hide loader.\n                common.loader.hide('#siteaccessblock');\n            });\n        }\n    }\n\n    // Must return the init function\n    return {\n        init: init\n    };\n});\n"],"file":"block_accessinfo.min.js"}